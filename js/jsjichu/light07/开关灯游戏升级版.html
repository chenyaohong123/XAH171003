<!DOCTYPE html>
<html lang="zh-CN">
<head>
	<meta charset="UTF-8">
	<title>开关灯升级版</title>
	<style>
    #wrap div{
        border-radius: 50%;
        transition: 0.5s;
        box-shadow: 0  0  50px rgb(108,203,205);
    }
    button{
         background:rgb(95,195,249);
         border-radius: 5px; 
         color:white;
         border:1px solid white;"
    }
    .box2{
         width: 100%;
         text-align: center;
    }
	</style>
</head>
<body>
	<!-- 游戏容器 -->
	<div id="wrap" style="width: 520px; height: 520px; font-size: 0; margin: 100px auto; ">	
	</div>
    <div class="box2">
    <button id="btn1">初级</button>
    <button id="btn2">中级</button>
    <button id="btn3">高级</button>
    </div>
    <script>
        //声明游戏所需变量
        var rowNum = 0;//行数量
        var colNum = 0;//列数量
        var itemWidth = 0;//单元格宽度
        var itemHeight = 0;//单元格高度
    	//创造元素
    var btn1 = document.getElementById('btn1');
    var btn2 = document.getElementById('btn2');
    var btn3 = document.getElementById('btn3');
	var wrap = document.getElementById('wrap');//获取wrap
    btn1.onclick = function(){
         rowNum = 5;
         colNum = 5;
         itemWidth = 50;
         itemHeight = 50
         btn11(); 
    }
    btn2.onclick = function(){
         rowNum = 12;
         colNum = 13;
         itemWidth = 40;
         itemHeight = 40;
         btn11(); 
    }
    btn3.onclick = function(){
         rowNum = 10;
         colNum = 20;
         itemWidth = 30;
         itemHeight = 30;
         btn11(); 
    }

    var eleArr=[];//声明数组，盛放所有新创建的div
    function btn11(){
        //为防止元素累加，每次重新创建之前先清空上次创建的元素
        wrap.innerHTML = '';
        //置空数组
        eleArr = [];
         //重新计算wrap的宽度
        wrap.style.width = colNum *(itemWidth+2)+'px';
        wrap.style.height = rowNum *(itemHeight+2)+'px';
    for(i=0;i < rowNum * colNum;i++){
        var newDiv = document.createElement('div');//创建一个div
        newDiv.style.width = itemWidth + 'px';
        newDiv.style.height = itemHeight + 'px';
        newDiv.style.border = '1px solid #eee';
        newDiv.style.background = 'green';
        newDiv.style.display = 'inline-block';
        newDiv.onclick = function(){
            eleClick(this);
            // console.log(this);//this变量：指向当前函数的所有者
        }
        wrap.appendChild(newDiv);//将newDiv插入到wrap中去
        eleArr.push(newDiv);
    }
    }
       
	//为每一个元素绑定点击事件
	function eleClick(ele){
		
		//获取当前点击元素在数组里的位置，根据这个位置判断上下左右的元素
        console.log(eleArr.indexOf(ele));
        var thisIndex = eleArr.indexOf(ele);
        judgeBg(ele);
        //排除最上面一排元素，判断其他元素的上方元素的背景色
        if(thisIndex > colNum - 1){
        	judgeBg(eleArr[thisIndex - colNum]);
        }
        //排除最下面一排元素，判断其他元素下方元素的背景色
        if(thisIndex < rowNum * colNum - colNum){
            judgeBg(eleArr[thisIndex + colNum]);	
        }
        //排除最左边的一列元素，判断其他元素左边元素的背景色
        if(thisIndex % colNum != 0 ){
            judgeBg(eleArr[thisIndex - 1]);
        }
        //排除最右边的一列元素，判断其他元素右边元素的背景色
        if((thisIndex + 1) % colNum != 0){
            judgeBg(eleArr[thisIndex + 1]);
        }
	}
	function judgeBg(a){
		//在这个函数中的a相当于eleClick里的ele
		var bg = a .style.background;//获取当前背景色
		//判断背景色
		if(bg  == 'green'){
		   a.style.background = 'rgb(93,143,203)';
		}
		else{
		   a.style.background = 'green';
		}
	}
    
    </script>
</body>
</html>