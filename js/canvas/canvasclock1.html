<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
	   <style type="text/css">
			#myCanvas2{
				background:black;
				display:block;
				margin: 0 auto;
			}
		</style>
	</head>
	<body>
		<canvas id="myCanvas2" width="800" height="600">
			您的浏览器不支持canvas，赶快更新版本吧!
		</canvas>
	</body>
	<script type="text/javascript">
	 var mc = document.getElementById('myCanvas2');
	 var ctx= mc.getContext('2d');
	 
	 //移动画布的(0,0)点到画布中央
	 ctx.translate(mc.width/2,mc.height/2);
	 
	 //绘制表盘
	 function drawBg(){
	 //表盘的边框
	 ctx.beginPath();
	 ctx.arc(0,0,200,0,2*Math.PI);
	 ctx.strokeStyle = '#fff';
	 ctx.lineWidth = '5';
	 ctx.stroke();
	 
	 //绘制刻度
	 for(var i=0;i<60;i++){
	   //根据i计算出每一个刻度所对应的圆心角
	   var deg = 2*Math.PI/60*i;
	   //根据圆心角计算出该刻度所对应的圆心坐标
	   var ox  = Math.cos(deg)*190;//x
	   var oy  = Math.sin(deg)*190;//y
	   //绘制刻度(每一个小圆)
	   ctx.beginPath();
	   ctx.fillStyle = '#fff';
	   if(i%5==0){
	   	//小时刻度半径变大
	   	ctx.arc(ox,oy,3,0,2*Math.PI);
	   }
	   else{
	   	//正常刻度半径正常
	   	ctx.arc(ox,oy,1,0,2*Math.PI);
	   }	   
	   ctx.fill();
	 }
	 
	 
	 //绘制小时数字
	 var numArr = [3,4,5,6,7,8,9,10,11,12,1,2];
//	 var deg2   = 0;
	 for(var i = 0;i<numArr.length;i++){
	 	//计算数字所在位置的圆心角
	 	var deg2 = 2*Math.PI/12 *i;
	 	//根据圆心角计算绘制文字的位置
	 	var numX = Math.cos(deg2)*175;//x
	 	var numY = Math.sin(deg2)*175;//y
	 	ctx.font = '17px Arial';
	 	ctx.textAlign = 'center';
	 	ctx.textBaseline = 'middle';
	 	ctx.fillText(numArr[i],numX,numY);
	 }
	 }
	 drawBg();
	 
	 //绘制时针
	 function drawHour(h,m){
	 	//计算时针旋转的角度
	 	//时针影响
	 	var hdeg = 2*Math.PI/12*h;
	 	//分针
	 	var mdeg = 2*Math.PI/12/60*m;
	 	//伪类让每次变化都基于最初的状态，要将最初的状态保存
	 	ctx.save();
	 	ctx.beginPath();
	 	ctx.rotate(hdeg+mdeg);
	 	ctx.moveTo(0,10);//时针开始的点
	 	ctx.lineTo(0,-100);//时针结束的点
	 	ctx.lineWidth = '7';
	 	ctx.lineCap = 'round';//让线两端的顶点变成圆角
	 	ctx.stroke();
	 	ctx.restore();
	 }
	 
	 //绘制分针
	 function drawMin(m,s){
	     //计算角度
	    var mdeg = 2*Math.PI/60*m;
	    var sdeg = 2*Math.PI/60/60*s;
	    ctx.save();
	 	ctx.beginPath();
	 	ctx.rotate(mdeg + sdeg);
	 	ctx.moveTo(0,10);
	 	ctx.lineTo(0,-130);
	 	ctx.lineWidth = '5';
	 	ctx.lineCap = 'round';//让线两端的顶点变成圆角
	 	ctx.stroke();
	 	ctx.restore();
	 	
	 }
	 
	 //绘制秒针
	 function drawSec(s){
	 	var deg = 2 *Math.PI/60*s;
	 	ctx.save();
	 	ctx.beginPath();
	 	ctx.rotate(deg);
	 	ctx.moveTo(-2,10);
	 	ctx.lineTo(2,10);
	 	ctx.lineTo(1,-150);
	 	ctx.lineTo(-1,-150);
	 	ctx.lineWidth = '3';
	 	ctx.fillStyle = 'red';
	 	ctx.closePath();
	 	ctx.fill();
	 	ctx.restore();
	 	
	 	//绘制中心
	 	ctx.beginPath();
	 	ctx.fillStyle = 'red';
	 	ctx.arc(0,0,5,0,2*Math.PI);
	 	ctx.fill();
	 }
	 
	 function clockRotate(){
	 	//清除画布
	 	ctx.clearRect(-mc.width/2,-mc.height/2,mc.width,mc.height);
	 	//重新绘制表盘
	 	 drawBg();
	 	//获取当前时间
	 	var myDate = new Date();
	 	var   h    = myDate.getHours();
	 	var   m    = myDate.getMinutes();
	 	var   s    = myDate.getSeconds();
	 	
	 	drawHour(h,m);
	 	drawMin(m,s);
	 	drawSec(s);
	 	
	 }
	 clockRotate();
	 setInterval(clockRotate,1000);
	 
	 
	 </script>
</html>
