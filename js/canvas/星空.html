<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>星空</title>
		<style>
			#myCanvas{
				background: rgb(12,15,27);
				display: block;
				margin: 0 auto;
			}
		</style>
	</head>
	<body>
		<canvas id="myCanvas" width="1200" height="800">
			您的浏览器不支持canvas
		</canvas>
		<script type="text/javascript">
			var mc  = document.getElementById('myCanvas');
			var ctx = mc.getContext('2d');
			
			//将圆点移到中心位置
			ctx.translate(mc.width/2,mc.height/2);
			
			//随机函数
			function rn(x , y){
				return parseInt(Math.random()*(y-x) + x);
			}
			
			//构造小球函数
			function Ball(){
				this.x = 0;
				this.y = 0;
				this.r =0.4;
				var speedX = rn(1,40);
				var speedY = rn(1,40);
				//随机方向
				this.speedX = rn(1,3) == 1?speedX : -speedX;
				this.speedY = rn(1,3) == 1?speedY : -speedY;			
			}
			
			//小球移动函数
			Ball.prototype.move = function(){
				this.x += this.speedX;
				this.y += this.speedY;
				this.r += 0.08;
				//更改移动速度
				this.speedX = this.speedX < 0 ?this.speedX - 0.1 : this.speedX + 0.1;
				this.speedY = this.speedY < 0 ?this.speedY - 0.1 : this.speedY + 0.1;
			}
			
			//绘制小球函数、
			Ball.prototype.draw = function(){
				ctx.beginPath();
				var g2 = ctx.createRadialGradient(this.x-0.3, this.y-0.3, 0.1, this.x, this.y, this.r);
				g2.addColorStop(0,'skyblue');
				g2.addColorStop(1,'blue');
				ctx.fillStyle = g2;
				ctx.shadowOffsetX = 0;
				ctx.shadowOffsetY = 0;
				ctx.shadowBlur = 30;
				ctx.shadowColor = 'deepskyblue';
				
				ctx.arc(this.x,this.y,this.r,0,2*Math.PI);
				ctx.fill();
			}
			
			var ballArr = [];
			function createBall(){
				var ball = new Ball();
				ballArr.push(ball);
			}
			
			console.log(ballArr);
			function moveBall(){
			   for(var i = 0;i<ballArr.length;i++){
			   	ballArr[i].move();
			   	ballArr[i].draw();
			   }		
			}
			var deg = 0;
			setInterval(function(){
				ctx.clearRect(-mc.width/2,-mc.height/2,mc.width,mc.height);	
				ctx.save();
//				 对角度进行++
                 deg += 0.03;
//              旋转坐标系
               ctx.rotate(deg);
				for(i = 0;i<15;i++){
				createBall();	
				}
				moveBall();
				ctx.restore();
			},80);
		</script>
	</body>
</html>
