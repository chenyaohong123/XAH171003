<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
		<style type="text/css">
			#myCanvas2{
				background:black;
				display:block;
				margin: 0 auto;
			}
		</style>
	</head>
	<body>
		<canvas id="myCanvas2" width="800" height="600">
			您的浏览器不支持canvas，赶快更新版本吧!
		</canvas>
	</body>
	<script type="text/javascript">
		var mc = document.getElementById('myCanvas2');
	    var ctx= mc.getContext('2d');
	    
	   
	    
//	    document.getElementsByTagName('body')[0].appendChild(img);

        //为image类添加原型方法：将图片绘制在canvas画布上
        Image.prototype.drawInCanvas = function(x,y,imgWidth,imgHeight,drawCtx){
        	 	 this.ox = x;
        	 	 this.oy = y;
        	 	 this.width = imgWidth;
        	 	 this.Height = imgHeight;
        	 	 drawCtx.drawImage(this,x,y,imgWidth,imgHeight);
        	 	 this.imgDate = drawCtx.getImageData(this.ox,this.oy,this.width,this.Height);
        	 	 this.data = this.imgDate.data;
        	 }
        //为image类添加在canvas上做反色主流的原型方法
        Image.prototype.inverseColor = function(drawCtx){
        	//获取到像素值
        	 if(this.ox == undefined || this.oy == undefined || this.width == undefined || this.Height == undefined || this.imgDate == undefined || this.data == undefined){
        	 	//错误信息提示
        	 }
        	 else{
        	 	
        	 	 for(var i = 0;i<this.data.length;i+=4){
        	 	this.data[i] = 255 - this.data[i];
        	 	this.data[i + 1] = 255 - this.data[i + 1];
        	 	this.data[i + 2] = 255 - this.data[i + 2];       	 	
        	 }
        	 drawCtx.putImageData(this.imgDate,this.ox,this.oy);
        	 }     	
        	 
        }
        
         var img = new Image();//Image类
	     img.src = '011.jpg';
         img.onload = function(){
         	img.drawInCanvas(10,10,400,400,ctx);
         	img.inverseColor(ctx);
         }
         
	</script>
</html>
