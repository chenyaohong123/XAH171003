<!DOCTYPE html>
<html>

	<head>
		<meta charset="UTF-8">
		<title>蝴蝶</title>
		<style type="text/css">
			#myCanvas2 {
				background: rgb(12,15,27);
				display: block;
				margin: 0 auto;
			}
		</style>
	</head>

	<body>
		<canvas id="myCanvas2" width="1200" height="800">
			您的浏览器不支持canvas，赶快更新版本吧!
		</canvas>
	</body>
	<script type="text/javascript">
		var mc = document.getElementById('myCanvas2');
		var ctx = mc.getContext('2d');

		ctx.translate(mc.width / 2, mc.height / 2);

		// 随机大小
		function randomSize(x, y) {
			return parseInt(Math.random() * (y - x) + x);
		}

		// 定义构造函数
		function Ball() {
			//圆心x
			this.x = 0;
			// 圆心y
			this.y = 0;
			// 圆心半径
			this.r = 0.4;
			// 速度
			var speedX = randomSize(1, 40);
			var speedY = randomSize(1, 40);
			// 随机方向
			this.speedX = randomSize(1, 3) == 1 ? speedX : -speedX;
			this.speedY = randomSize(1, 3) == 1 ? speedY : -speedY;
		}
        
         // 定义函数完成小球移动
		Ball.prototype.move = function() {
			// 更改绘制位置
			this.x += this.speedX;
			this.y += this.speedY;
			// 更改半径
			this.r += 0.08;
			// 更改移动速度
			this.speedX = this.speedX < 0 ? this.speedX - 0.1 : this.speedX + 0.1;
			this.speedY = this.speedY < 0 ? this.speedY - 0.1 : this.speedY + 0.1;
		} 
        
        
		// 定义函数绘制小球
		Ball.prototype.draw = function() {
            ctx.beginPath();
			var g2 = ctx.createRadialGradient(this.x-0.2, this.y-0.2, 0.1, this.x, this.y, 0.6);
			g2.addColorStop(0, 'white');
			g2.addColorStop(1, 'blue');
			ctx.fillStyle = g2;
			ctx.shadowOffsetX = 0; // 设置水平位移
            ctx.shadowOffsetY = 0; // 设置垂直位移
            ctx.shadowBlur = 20; // 设置模糊度
            ctx.shadowColor = 'white'; // 设置阴影颜色
			
			ctx.arc(this.x, this.y, this.r, 0, 2 * Math.PI);
			ctx.fill();
		}
		
		// 创建数组保存生成小球对象
		var balls = [];
		//定义函数来生成小球对象
		function creatBall() {
			var ball = new Ball();
			balls.push(ball);
		}

		function moveBalls() {
			for(var i = 0; i < balls.length; i++) {
				balls[i].move();
				balls[i].draw();
			}
		}

		setInterval(function() {
			//清理画布
			ctx.clearRect(-mc.width / 2, -mc.height / 2, mc.width, mc.height);
			// 保存状态点
			ctx.save();
			for(var i = 0; i < 8; i++) {
				// 生成小球
				creatBall();
			}
			// 移动小球
			moveBalls();
			// 恢复坐标系
			ctx.restore();
		}, 80);
	</script>

</html>